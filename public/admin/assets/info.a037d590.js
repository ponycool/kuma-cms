import{u as y,av as s,r as o,bj as C,bq as j,a as g,j as a,aj as u,ad as v,B as S,br as F,M as q}from"./index.8958ccd3.js";import{S as w}from"./index.b1719264.js";import{l as A}from"./index.f54b0d3d.js";import{u as U}from"./index.da6daa32.js";function Z({userInfo:l={},loading:r}){const e=y(A),[n]=s.useForm(),[f,m]=o.exports.useState(!1),{lang:d}=o.exports.useContext(C),x=j(),b=async()=>{n.validate().then(async t=>{m(!0);const{accountName:i,nickname:p,email:N}=t,h=await U({uuid:l.uuid,accountName:i,nickname:p,email:N});h.code===0&&(F(x),q.success(h.message))}).catch(t=>{}).finally(()=>{m(!1)})},k=()=>{n.setFieldsValue({...l,accountName:l.account_name})},c=(t=1)=>a(w,{text:{rows:t,width:new Array(t).fill("100%")},animation:!0});return o.exports.useEffect(()=>{n.setFieldsValue({...l,accountName:l.account_name})},[]),g(s,{style:{width:"500px",marginTop:"6px"},form:n,labelCol:{span:d==="en-US"?7:6},wrapperCol:{span:d==="en-US"?17:18},children:[a(s.Item,{label:e["userSetting.accountName"],field:"accountName",rules:[{required:!0,message:e["userSetting.accountName.placeholder"]}],children:r?c:a(u,{placeholder:e["userSetting.accountName.placeholder"]})}),a(s.Item,{label:e["userSetting.nickname"],field:"nickname",rules:[{required:!0,message:e["userSetting.nickname.placeholder"]}],children:r?c:a(u,{placeholder:e["userSetting.nickname.placeholder"]})}),a(s.Item,{label:e["userSetting.email"],field:"email",rules:[{required:!0,message:e["userSetting.email.placeholder"]},{validator(t,i){/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)||i(e["userSetting.email.error"])}}],children:r?c:a(u,{placeholder:e["userSetting.email.placeholder"]})}),a(s.Item,{label:" ",children:g(v,{children:[a(S,{loading:f,type:"primary",onClick:b,children:e["userSetting.save"]}),a(S,{onClick:k,children:e["userSetting.reset"]})]})})]})}export{Z as default};
