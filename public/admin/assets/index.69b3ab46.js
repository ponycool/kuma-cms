import{u as m,i as C,r as o,a as s,ad as w,j as a,af as L,B as r,J as b}from"./index.bbe790dc.js";import{C as S}from"./index.7f78f3d8.js";import{i as R,r as T,c as A}from"./index.fa5b6948.js";import{d as I}from"./download.9953d649.js";import{I as k}from"./index.3a3a7e0d.js";function J(){const t=m(C),e=m(R),[v,i]=o.exports.useState([]),[c,d]=o.exports.useState(!1),[u,f]=o.exports.useState(!1),[p,x]=o.exports.useState(10),[g,y]=o.exports.useState(50),n=async()=>{d(!0);const l=await T(g);l.code===0?i((l==null?void 0:l.data)||[]):i([]),d(!1)},$=async()=>{f(!0);try{(await A()).code===0&&n()}finally{f(!1)}};return o.exports.useEffect(()=>{n();const l=setInterval(()=>{n()},p*1e3);return()=>{clearInterval(l)}},[p,g]),s(S,{children:[s(w,{children:[a(L,{prefix:e.refreshTime,placeholder:e.selectRefreshTime,options:[{label:`3${e.seconds}`,value:3},{label:`5${e.seconds}`,value:5},{label:`10${e.seconds}`,value:10},{label:`30${e.seconds}`,value:30},{label:`60${e.seconds}`,value:60}],defaultValue:10,onChange:x},"autoRefreshTime"),a(L,{prefix:e.logLine,placeholder:e.selectLogLine,options:[{label:`5${e.line}`,value:5},{label:`10${e.line}`,value:10},{label:`20${e.line}`,value:20},{label:`50${e.line}`,value:50},{label:`100${e.line}`,value:100}],defaultValue:50,allowClear:!0,onChange:y},"line"),a(r,{type:"primary",icon:c?a(b,{}):null,disabled:c,onClick:n,children:t["table.refresh"]},"refresh"),s(r,{type:"primary",icon:u?a(b,{}):null,disabled:u,onClick:$,children:[a(k,{}),t.clearLog]},"clear"),a(r,{type:"primary",onClick:()=>{I("/api/log/run/download")},children:t["log download"]},"download")]}),a("ol",{style:{height:"70vh",overflow:"auto",backgroundColor:"#f5f5f5",padding:"0"},children:v.map((l,h)=>s("li",{style:{listStyle:"none"},children:[s("span",{children:[h+1,"\xA0\xA0\xA0\xA0"]}),l]},h))})]})}export{J as default};
