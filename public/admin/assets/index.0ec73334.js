import{aj as n,am as z,u as M,av as l,r,j as e,B as d,a as p,af as b,M as C}from"./index.977159c0.js";import{T as _}from"./index.6c59eb1b.js";import{C as j}from"./index.c03e8cb5.js";import{i as J,C as N,s as O,t as D,l as G,a as H,b as P}from"./cache.c9c48b52.js";const u=n.TextArea,o=_.TabPane,U=z.Group;function $(){const t=M(J),[c]=l.useForm(),[S,m]=r.exports.useState(!1),[E,h]=r.exports.useState(!1),[F,f]=r.exports.useState(!1),[g,x]=r.exports.useState("\u57FA\u7840\u8BBE\u7F6E"),[B,v]=r.exports.useState([]),[w,I]=r.exports.useState([]);async function y(){m(!0);try{const a=await O(),{sitemap_type:i,sitemap_additional_link:s}=a.data;c.setFieldsValue({...a.data,sitemap_type:i?JSON.parse(i):void 0,sitemap_additional_link:s?JSON.parse(s).join(`
`):void 0})}finally{m(!1)}}async function k(){try{const a=await D();if(a.code===0){const i=a.data.list.map(s=>({label:s,value:s}));v(i)}}catch{}}async function L(){try{const a=await G();if(a.code===0){const i=a.data.language.map(s=>({label:s,value:s}));I(i)}}catch{}}function A(){c.validate().then(async a=>{for(const i in a)a[i]?i==="sitemap_type"?(delete a[i],a[i]=JSON.stringify(a[i])):i==="sitemap_additional_link"&&delete a[i]:delete a[i];h(!0);try{const i=await H(a);i.code===0&&C.success(i.message)}catch{}finally{h(!1)}}).catch(a=>{console.log(a)})}function T(){f(!0);const a=JSON.stringify(c.getFieldValue("sitemap_type")),i=JSON.stringify(c.getFieldValue("sitemap_additional_link").split(`
`).filter(s=>s));P({sitemapType:a,additionalLink:i}).then(s=>{C.success(s.message)}).finally(()=>{f(!1)})}return r.exports.useEffect(()=>{y(),k(),L()},[]),e(j,{actions:(()=>{switch(g){case"\u7F13\u5B58\u8BBE\u7F6E":return[];case"\u7F51\u7AD9\u5730\u56FE":return[e(d,{type:"primary",loading:F,onClick:T,children:t.setMap},"refresh")];default:return[e(d,{type:"primary",loading:S,onClick:y,children:t.refresh},"refresh"),e(d,{type:"primary",loading:E,onClick:A,children:t.save},"update")]}})(),children:e(l,{form:c,layout:"horizontal",labelCol:{span:2},wrapperCol:{span:8},children:p(_,{activeTab:g,onChange:x,children:[p(o,{title:t.basic,children:[e(l.Item,{label:t.site,field:"site_name",children:e(n,{})}),e(l.Item,{label:t.siteUrl,field:"site_url",children:e(n,{})}),e(l.Item,{label:t.siteKeyword,field:"site_keywords",children:e(n,{})}),e(l.Item,{label:t.siteDescription,field:"site_description",children:e(u,{autoSize:!0})}),e(l.Item,{label:t.servicePhone,field:"service_phone",wrapperCol:{span:4},children:e(n,{})}),e(l.Item,{label:t.serviceEmail,field:"service_email",wrapperCol:{span:4},rules:[{validator(a,i){a&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)||i(t.emailError))}}],children:e(n,{})}),e(l.Item,{label:t.copyright,field:"copyright",children:e(n,{})})]},"\u57FA\u7840\u8BBE\u7F6E"),e(o,{title:t.themeSetting,children:e(l.Item,{label:t.theme,field:"theme",labelCol:{span:1},wrapperCol:{span:4},children:e(b,{options:B})})},"\u4E3B\u9898\u8BBE\u7F6E"),e(o,{title:t.languageSetting,children:e(l.Item,{label:t.language,field:"language",labelCol:{span:1},wrapperCol:{span:4},children:e(b,{options:w})})},"\u8BED\u8A00\u8BBE\u7F6E"),p(o,{title:t.record,children:[e(l.Item,{label:t.icp,field:"icp",children:e(n,{})}),e(l.Item,{label:t.police,field:"police_record",children:e(n,{})})]},"\u5907\u6848\u4FE1\u606F"),p(o,{title:t.script,children:[e(l.Item,{label:t.statistics,field:"statistical_script",wrapperCol:{span:22},children:e(u,{autoSize:!0,style:{minHeight:180}})}),e(l.Item,{label:t.serviceScript,field:"service_script",wrapperCol:{span:22},children:e(u,{autoSize:!0,style:{minHeight:180}})})]},"\u811A\u672C\u4EE3\u7801"),p(o,{title:t.map,children:[e(l.Item,{label:t.mapType,field:"sitemap_type",wrapperCol:{span:10},children:e(U,{options:["txt","xml"]})}),e(l.Item,{label:t.additional,field:"sitemap_additional_link",wrapperCol:{span:22},children:e(u,{autoSize:!0,style:{minHeight:180}})})]},"\u7F51\u7AD9\u5730\u56FE"),e(o,{title:t.cache,children:e(N,{})},"\u7F13\u5B58\u8BBE\u7F6E")]})})})}export{$ as default};
