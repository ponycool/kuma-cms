import{h as g,aj as b,av as s,r as f,u as F,j as t,K as D,B as c,a as m,am as v,bb as k,M as q,i as I,bc as P,be as O,F as T}from"./index.e5231958.js";import{C as x}from"./index.4eb28e3c.js";import{B as y}from"./index.1e470284.js";import{P as L}from"./index.4e26ef20.js";import{C as K,D as A}from"./DelPopconfirm.bde5bf6a.js";import{c as _}from"./convertNullToUndefined.a19d8223.js";import{M as U}from"./index.2c275639.js";import{i as j}from"./use-immer.module.47315687.js";import{t as z}from"./index.bcae981d.js";import{I as M}from"./index.84ca1e15.js";import{I as N}from"./index.b2f0efc3.js";import"./index.d58ab02b.js";import"./b-tween.es.064e2a03.js";import"./index.9ed5251d.js";import"./index.acb1c43d.js";import"./index.d6346ac5.js";function W(e){return g.post("/api/page/query",e)}function R(e){return g.post("/api/page/detail",e)}function H(e){return g.post("/api/page/create",e)}function V(e){return g.post("/api/page/update",e)}function G(e){return g.post("/api/page/delete",e)}function $(e){return g.post("/api/page/enable",{uuid:e})}function J(e){return g.post("/api/page/disable",{uuid:e})}const w={"en-US":{"columns.keyword":"Keyword","columns.title":"Title","columns.code":"Code","columns.status":"Status","columns.status.enabled":"Enabled","columns.status.disabled":"Disabled","columns.updatedAt":"Updated At","columns.action":"Action","columns.action.edit":"Edit","columns.action.enable":"Enable","columns.action.disable":"Disable","columns.action.delete":"Delete","pageCreate.title.update":"Edit Page","pageCreate.title.create":"Create Page","pageCreate.button.cancel":"Cancel","pageCreate.button.save":"Save","pageCreate.button.create":"Create","pageCreate.form.title.label":"Title","pageCreate.form.title.required":"Please enter the title","pageCreate.form.code.label":"Code","pageCreate.form.code.required":"Please enter the code","pageCreate.form.seoTitle.label":"SEO Title","pageCreate.form.seoTitle.required":"Please enter the SEO title","pageCreate.form.seoDesc.label":"SEO Description","pageCreate.form.seoDesc.required":"Please enter the SEO description","pageCreate.form.seoKeywords.label":"SEO Keywords","pageCreate.form.seoKeywords.required":"Please enter the SEO keywords","pageCreate.form.status.label":"Status","pageCreate.form.content.label":"Content","pageCreate.form.content.required":"Please enter the content","pageCreate.form.title.placeholder":"Please enter the title","pageCreate.form.code.placeholder":"Please enter the code","pageCreate.form.seoTitle.placeholder":"Please enter the SEO title","pageCreate.form.seoDesc.placeholder":"Please enter the SEO description","pageCreate.form.seoKeywords.placeholder":"Please enter the SEO keywords","pageCreate.form.content.placeholder":"Please enter the content"},"zh-CN":{"columns.keyword":"\u5173\u952E\u8BCD","columns.title":"\u6807\u9898","columns.code":"\u7F16\u7801","columns.status":"\u542F\u7528\u72B6\u6001","columns.status.enabled":"\u542F\u7528","columns.status.disabled":"\u7981\u7528","columns.updatedAt":"\u4FEE\u6539\u65F6\u95F4","columns.action":"\u64CD\u4F5C","columns.action.edit":"\u7F16\u8F91","columns.action.enable":"\u542F\u7528","columns.action.disable":"\u7981\u7528","columns.action.delete":"\u5220\u9664","pageCreate.title.update":"\u7F16\u8F91\u9875\u9762","pageCreate.title.create":"\u521B\u5EFA\u9875\u9762","pageCreate.button.cancel":"\u53D6\u6D88","pageCreate.button.save":"\u4FDD\u5B58","pageCreate.button.create":"\u521B\u5EFA","pageCreate.form.title.label":"\u6807\u9898","pageCreate.form.title.required":"\u8BF7\u8F93\u5165\u6807\u9898","pageCreate.form.code.label":"\u7F16\u7801","pageCreate.form.code.required":"\u8BF7\u8F93\u5165\u7F16\u7801","pageCreate.form.seoTitle.label":"SEO\u6807\u9898","pageCreate.form.seoTitle.required":"\u8BF7\u8F93\u5165SEO\u6807\u9898","pageCreate.form.seoDesc.label":"SEO\u63CF\u8FF0","pageCreate.form.seoDesc.required":"\u8BF7\u8F93\u5165SEO\u63CF\u8FF0","pageCreate.form.seoKeywords.label":"SEO\u5173\u952E\u8BCD","pageCreate.form.seoKeywords.required":"\u8BF7\u8F93\u5165SEO\u5173\u952E\u8BCD","pageCreate.form.status.label":"\u542F\u7528","pageCreate.form.content.label":"\u6B63\u6587","pageCreate.form.content.required":"\u8BF7\u8F93\u5165\u6B63\u6587","pageCreate.form.title.placeholder":"\u8BF7\u8F93\u5165\u6807\u9898","pageCreate.form.code.placeholder":"\u8BF7\u8F93\u5165\u7F16\u7801","pageCreate.form.seoTitle.placeholder":"\u8BF7\u8F93\u5165SEO\u6807\u9898","pageCreate.form.seoDesc.placeholder":"\u8BF7\u8F93\u5165SEO\u63CF\u8FF0","pageCreate.form.seoKeywords.placeholder":"\u8BF7\u8F93\u5165SEO\u5173\u952E\u8BCD","pageCreate.form.content.placeholder":"\u8BF7\u8F93\u5165\u6B63\u6587"}},E=b.TextArea;function Q(e){const[i]=s.useForm(),[n,h]=f.exports.useState(!1),a=F(w);async function d(){i.validate().then(async r=>{h(!0);try{const u={...r,status:r.status?"true":"false"};let C;e.data?C=await V({...u,uuid:e.data.uuid||e.uuid}):C=await H(u),C.code===0&&(e.reload(),e.close())}finally{h(!1)}}).catch(r=>{if(r.errors)for(const u in r.errors)q.error(r.errors[u].message)})}return f.exports.useEffect(()=>{var r;if((r=e.data)!=null&&r.page){const u=_(e.data.page);i.setFieldsValue({...u})}},[e.data]),f.exports.useEffect(()=>{e.visible===!1&&i.resetFields()},[i,e.visible]),t(x,{title:e.data?a["pageCreate.title.update"]:a["pageCreate.title.create"],extra:t(D,{style:{cursor:"point",color:"#333",fontSize:"16px"},onClick:()=>e.close()}),actions:[t(c,{type:"default",onClick:()=>e.close(),children:a["pageCreate.button.cancel"]},"cancel"),t(c,{type:"primary",loading:n,onClick:d,children:e.data?a["pageCreate.button.save"]:a["pageCreate.button.create"]},"submit")],children:m(s,{form:i,labelCol:{span:2},wrapperCol:{span:22},children:[t(s.Item,{label:a["pageCreate.form.title.label"],field:"title",rules:[{required:!0,message:a["pageCreate.form.title.required"]}],children:t(b,{maxLength:100,showWordLimit:!0,placeholder:a["pageCreate.form.title.placeholder"]})}),t(s.Item,{label:a["pageCreate.form.code.label"],field:"code",wrapperCol:{span:2},children:t(b,{maxLength:50,placeholder:a["pageCreate.form.code.placeholder"]})}),t(s.Item,{label:a["pageCreate.form.seoTitle.label"],field:"seo_title",children:t(b,{maxLength:200,showWordLimit:!0,placeholder:a["pageCreate.form.seoTitle.placeholder"]})}),t(s.Item,{label:a["pageCreate.form.seoDesc.label"],field:"seo_desc",children:t(E,{maxLength:200,placeholder:a["pageCreate.form.seoDesc.placeholder"],showWordLimit:!0,autoSize:!0,style:{minHeight:64}})}),t(s.Item,{label:a["pageCreate.form.seoKeywords.label"],field:"seo_keywords",children:t(E,{maxLength:200,placeholder:a["pageCreate.form.seoKeywords.placeholder"],showWordLimit:!0,autoSize:!0,style:{minHeight:64}})}),t(s.Item,{label:a["pageCreate.form.status.label"],field:"status",triggerPropName:"checked",initialValue:!1,children:t(v,{})}),t(k,{orientation:"left",children:a["pageCreate.form.content.label"]}),t(s.Item,{field:"content",wrapperCol:{span:24},triggerPropName:"html",trigger:"getContent",rules:[{required:!0},{validator(r,u){if(r==="<p><br></p>")return u(a["pageCreate.form.content.required"]);u()}}],children:t(U,{})})]})})}function me(){const e=F(w),i=F(I),n=f.exports.useRef(),[h,a]=f.exports.useState([]),[d,r]=j({visible:!1,close:function(){r(l=>{l.visible=!1})}}),[u,C]=f.exports.useState();async function B(l){try{const o=await R({uuid:l});o.code===0&&(C(l),r(p=>{p.data=o.data,p.visible=!0}))}catch{}}f.exports.useEffect(()=>{z().then(l=>{const o=[];for(const p in l.data)o.push({value:p,label:l.data[p]});a(o)})},[]);const S=[{title:e["columns.keyword"],dataIndex:"keyword",search:!0,hide:!0},{title:e["columns.title"],dataIndex:"title",ellipsis:!0},{title:e["columns.code"],dataIndex:"code"},{title:e["columns.status"],dataIndex:"status",render(l,o){return o.status===1?t(y,{status:"success",text:e["columns.status.enabled"]}):t(y,{status:"error",text:e["columns.status.disabled"]})}},{title:e["columns.updateAt"],dataIndex:"updated_at"},{title:e["columns.action"],width:280,render:(l,o)=>m(K,{children:[m(c,{type:"text",onClick:()=>B(o.uuid),children:[t(P,{}),e["columns.action.edit"]]}),o.status===0?m(c,{type:"text",onClick:async()=>{(await $(o.uuid)).code===0&&n.current.reload()},children:[t(M,{}),e["columns.action.enable"]]}):m(c,{type:"text",onClick:async()=>{(await J(o.uuid)).code===0&&n.current.reload()},children:[t(O,{}),e["columns.action.disable"]]}),t(A,{reqDel:G,params:{uuid:o.uuid},reload:()=>n.current.reload(),children:m(c,{type:"text",children:[t(N,{}),e["columns.action.delete"]]})})]})}];return m(T,{children:[d.visible&&t(Q,{visible:d.visible,data:d.data,close:()=>d.close(),reload:()=>n.current.reload(),target:h,uuid:u}),t(x,{style:{display:d.visible?"none":void 0},children:t(L,{ref:n,request:W,columns:S,actionBarRender:[t(c,{type:"primary",onClick:()=>n.current.reload(),children:i["table.refresh"]},"refresh")],toolBarRender:[t(c,{type:"primary",onClick:()=>{C(void 0),r(l=>{l.visible=!0,l.data=void 0})},children:i["table.createPage"]},"create")]})})]})}export{me as default};
