import{R as P,r as u,g as D,j as n,_ as I,h as x,af as B,am as N,a as i,F as v,ad as z,B as K,M as E}from"./index.216535ff.js";import{C as F}from"./index.e37da6f9.js";import{P as W}from"./index.8d6eec88.js";import"./index.56f5c539.js";import"./index.d4750b95.js";function w(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,t)}return r}function S(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?w(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Y(e,a){var r=u.exports.useContext(D),t=r.prefixCls,c=t===void 0?"arco":t,p=e.spin,l=e.className,o=S(S({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(l?l+" ":"").concat(c,"-icon ").concat(c,"-icon-exclamation-circle")});return p&&(o.className="".concat(o.className," ").concat(c,"-icon-loading")),delete o.spin,delete o.isIcon,n("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...o,children:n("path",{d:"M24 28V14m0 16v4M6 24c0-9.941 8.059-18 18-18s18 8.059 18 18-8.059 18-18 18S6 33.941 6 24Z"})})}var b=P.forwardRef(Y);b.defaultProps={isIcon:!0};b.displayName="IconExclamationCircle";var q=b;function A(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,t)}return r}function j(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?A(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function V(e,a){var r=u.exports.useContext(D),t=r.prefixCls,c=t===void 0?"arco":t,p=e.spin,l=e.className,o=j(j({"aria-hidden":!0,focusable:!1,ref:a},e),{},{className:"".concat(l?l+" ":"").concat(c,"-icon ").concat(c,"-icon-code")});return p&&(o.className="".concat(o.className," ").concat(c,"-icon-loading")),delete o.spin,delete o.isIcon,n("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...o,children:n("path",{d:"M16.734 12.686 5.42 24l11.314 11.314m14.521-22.628L42.57 24 31.255 35.314M27.2 6.28l-6.251 35.453"})})}var C=P.forwardRef(V);C.defaultProps={isIcon:!0};C.displayName="IconCode";var Z=C;function H(e){return x.post("/api/database/table/query",e)}function J(e){return x.post("/api/scaffold/entity",e)}function Q(e){return x.post("/api/scaffold/model",e)}function U(e){return x.post("/api/scaffold/service",e)}const X=B.Option,ee=N.Group,te=["\u5B9E\u4F53","\u6A21\u578B","\u670D\u52A1"],re={\u5B9E\u4F53:J,\u6A21\u578B:Q,\u670D\u52A1:U};function ue(){const[e,a]=u.exports.useState([]),[r,t]=u.exports.useState([]),[c,p]=u.exports.useState(!1),[l,o]=u.exports.useState(!1),[h,_]=u.exports.useState(""),[L,k]=u.exports.useState("false"),[m,M]=u.exports.useState([]),[$,g]=u.exports.useState(0),T=()=>{p(!0),H({}).then(s=>{const f=s.data.tables;t(f||[]),p(!1)})};u.exports.useEffect(()=>{T()},[]);const R=async()=>{if(a([]),g(0),h===""||h===void 0)return E.error("\u8BF7\u9009\u62E9\u6570\u636E\u8868"),!1;if(m.length===0)return E.error("\u8BF7\u9009\u62E9\u8981\u751F\u6210\u7684\u6587\u4EF6"),!1;o(!0);let s=0;const f=m.length,O=[];for(const y of m){s++;const G=re[y];try{const d=await G({table:h,overwrite:L});d&&d.data&&d.data.message&&O.push(d.data.message),g(Math.round(s/f*100)),a(O)}catch(d){console.error(`\u521B\u5EFA${y}\u63A5\u53E3\u8BF7\u6C42\u51FA\u9519\uFF1A`,d)}}};return i(v,{children:[n(F,{children:n(z,{children:n(B,{prefix:"\u6570\u636E\u8868",showSearch:!0,allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u8868",style:{width:"300px"},loading:c,onChange:s=>{_(s),g(0),o(!1),a([])},children:r.map(s=>n(X,{value:s.slice(2),children:s.slice(2)},s.slice(2)))},"tableName")})}),i(F,{style:{marginTop:"20px",paddingLeft:"10px"},children:[n("span",{children:"\u751F\u6210\u7C7B\u578B"}),"\xA0\xA0",n(ee,{options:te,onChange:s=>{M(s)}}),n("br",{}),n("br",{}),n("span",{children:"\u6587\u4EF6\u91CD\u5199"}),"\xA0\xA0",n(N,{onChange:s=>{k(s.toString())}}),n("br",{}),i("span",{style:{fontSize:"10px",marginLeft:"70px"},children:[n(q,{}),"\u6CE8:\u9009\u62E9\u6587\u4EF6\u91CD\u5199,\u4F1A\u8986\u76D6\u5DF2\u751F\u6210\u6587\u4EF6"]}),l?i(v,{children:[n("br",{}),n("span",{children:"\u751F\u6210\u8FDB\u5EA6"}),"\xA0\xA0"," ",n(W,{steps:5,size:"small",percent:$})," ",n("br",{})]}):"",n("br",{}),i("div",{style:{display:"flex"},children:[n("span",{children:"\u751F\u6210\u65E5\u5FD7"}),"\xA0\xA0",n("ol",{style:{height:"20vh",width:"35vw",overflow:"auto",backgroundColor:"#f5f5f5",padding:"0",margin:"5px"},children:e.map((s,f)=>i("li",{style:{listStyle:"none"},children:[i("span",{children:["\xA0",f+1,"\xA0\xA0\xA0\xA0"]}),s]},f))})]}),n("br",{}),i(K,{style:{marginLeft:"4.3%"},type:"primary",onClick:R,children:[n(Z,{}),"\u751F\u6210"]},"generateBtn")]})]})}export{ue as default};
