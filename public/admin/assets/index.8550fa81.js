import{u as H,r as e,bm as J,j as a,a as L,aj as M,ay as Q}from"./index.ebe80f86.js";import{P as V}from"./index.bb775d25.js";import{C as W}from"./index.5e2f8594.js";import{T as v}from"./index.54ccad75.js";import{l as X,s as Y,q as Z,a as _}from"./index.8b8a6491.js";import{s as b}from"./index.module.82d05283.js";import tt from"./card-block.a2086c3c.js";import et from"./card-add.3ee69291.js";import at from"./share-record.8ba77238.js";import{i as st}from"./use-immer.module.5d332cb7.js";import rt from"./create.824eb4ce.js";import"./index.cd327ad8.js";import"./index.3d4a4237.js";import"./index.4bd3756a.js";import"./index.377593c5.js";import"./index.b3429c1e.js";import"./index.567ccee7.js";import"./b-tween.es.064e2a03.js";import"./index.e89cd15a.js";import"./index.84a41917.js";import"./index.e0ea0491.js";import"./index.978cbd4d.js";import"./scrollIntoView.d5893045.js";import"./index.2334b028.js";import"./index.1bfe97e4.js";import"./index.4a3ac6c7.js";import"./index.1c0460b5.js";import"./convertNullToUndefined.a19d8223.js";import"./index.8ad85c7c.js";const{Row:ot,Col:w}=Q;function Gt(){const p=H(X),{lang:m}=e.exports.useContext(J),[A,f]=e.exports.useState(!0),[R,j]=e.exports.useState(new Array(1).fill({})),[r,z]=e.exports.useState(),[i,N]=e.exports.useState("ALL"),[x,P]=e.exports.useState(),[n,c]=st({visible:!1,close:function(){c(t=>{t.visible=!1})}}),[h,d]=e.exports.useState(),[l,S]=e.exports.useState(1),[u,T]=e.exports.useState(10),[E,q]=e.exports.useState(0),[D,C]=e.exports.useState(!1),[G,K]=e.exports.useState();function $(){d(void 0),c(t=>{t.data=void 0,t.visible=!0})}async function k(t){try{const o=await _({uuid:t});o.code===0&&(d(t),c(s=>{s.data=o.data,s.visible=!0}))}catch{}}async function B(){const t=await Y();z(t.data.status)}function g(){!r||(f(!0),Z({page:l,pageSize:u,status:i==="ALL"?void 0:i,keyword:x}).then(t=>{const o=t.data.pageData.map(s=>({...s,status:s.status,statusText:r[s.status]}));q(t.data.total),j(o)}).finally(()=>{f(!1)}))}function y(){S(1),g()}e.exports.useEffect(()=>{B()},[]),e.exports.useEffect(()=>{g()},[r,l,u,i,x]);const I=()=>a(at,{uuid:h,name:G,close:()=>C(!1)}),O=()=>a(rt,{data:n.data,status:r,close:()=>n.close(),reload:y,uuid:h}),U=()=>L(ot,{gutter:24,className:b["card-content"],children:[a(w,{xs:24,sm:12,md:8,lg:6,xl:6,xxl:6,children:a(et,{description:p["cardList.add.quality"],onCreate:$})}),R.map((t,o)=>a(w,{xs:24,sm:12,md:8,lg:6,xl:6,xxl:6,children:a(tt,{card:t,loading:A,onEdit:k,onShareRecord:s=>{d(t.id.toString()),K(s),C(!0)},reload:y})},o))]}),F=()=>L(W,{children:[a(v,{activeTab:i,type:"rounded",onChange:N,extra:a(M.Search,{style:{width:"240px"},placeholder:p[`cardList.tab.${i}.placeholder`],onSearch:P}),children:r&&Object.keys({ALL:m==="zh-CN"?"\u5168\u90E8":"All",...r}).map(t=>a(v.TabPane,{title:m==="zh-CN"?{ALL:"\u5168\u90E8",...r}[t]:t},t))}),a("div",{className:b.container,children:U()}),a("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:a(V,{sizeCanChange:!0,total:E,pageSize:u,current:l,onChange:S,onPageSizeChange:T})})]});return(()=>n.visible?O():D?I():F())()}export{Gt as default};
