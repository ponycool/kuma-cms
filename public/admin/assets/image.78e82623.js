import{c as L,R as v,q as Le,y as Se,L as ue,r as c,C as Te,f as je,k as ke,d as se,Z as D,v as Re,o as Me,j as p,a as G,J as Fe}from"./index.bba30489.js";import{T as Ge,a as ve,b as ze,P as $e,u as Ae,c as Ue}from"./index.8cae9d5a.js";function de(e){var o=e.title,t=e.description,r=e.actions,i=o||t,a=r&&r.length,s=i||a;return[s,i,a]}var Be=globalThis&&globalThis.__read||function(e,o){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),i,a=[],s;try{for(;(o===void 0||o-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(n){s={error:n}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},Ke=function(e){var o,t=e.style,r=e.className,i=e.title,a=e.description,s=e.actions,n=e.prefixCls,I=e.simple,x=Be(de({title:i,description:a,actions:s}),3),d=x[0],g=x[1],C=x[2];if(!d)return null;var f=n+"-footer",O=L(f,r,(o={},o[f+"-with-actions"]=C,o)),b=function(){var h=v.createElement("div",{className:n+"-actions-list"},s.map(function(E,m){return v.createElement("div",{className:n+"-actions-item",key:""+m},E)}));return I?v.createElement("div",{className:n+"-actions-list"},v.createElement(Ge,{prefixCls:n,popup:function(){return h}},v.createElement("div",{className:L(n+"-actions-item",n+"-actions-item-trigger")},v.createElement("span",null,v.createElement(Le,null))))):h};return v.createElement("div",{className:O,style:t},g&&v.createElement("div",{className:L(f+"-block",n+"-caption")},i&&v.createElement("div",{className:n+"-caption-title",title:i},i),a&&!I&&v.createElement("div",{className:n+"-caption-description",title:a},a)),C&&v.createElement("div",{className:L(f+"-block",n+"-actions")},b()))},fe=!Se&&!ue(window==null?void 0:window.IntersectionObserver);function qe(e,o){o===void 0&&(o={});var t=c.exports.useRef(),r=function(){t.current&&(t.current.disconnect(),t.current=null)},i=function(a){a&&(r(),fe&&(t.current=new IntersectionObserver(e,o),t.current.observe(a)))};return{observer:t.current,cor:i,dor:r}}var Je=globalThis&&globalThis.__rest||function(e,o){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&o.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)o.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t},le=globalThis&&globalThis.__read||function(e,o){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),i,a=[],s;try{for(;(o===void 0||o-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(n){s={error:n}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a};function Ze(e){var o=e.defaultInView,t=e.unobserverOnEnter,r=t===void 0?!0:t,i=e.onChange,a=e.target,s=Je(e,["defaultInView","unobserverOnEnter","onChange","target"]),n=le(c.exports.useState(fe?o:!0),2),I=n[0],x=n[1],d=c.exports.useCallback(function(b,h){var E=le(b,1),m=E[0],$=h.thresholds.some(function(w){return m.intersectionRatio>=w}),S=$&&m.isIntersecting;x(S),i==null||i(S,m),S&&r&&h.unobserve(m.target)},[i,r]),g=qe(d,s),C=g.cor,f=g.dor,O=g.observer;return c.exports.useEffect(function(){var b=o&&r;return b?f():a&&C(a),f},[a,o,r]),{inView:I,observer:O}}var R=globalThis&&globalThis.__assign||function(){return R=Object.assign||function(e){for(var o,t=1,r=arguments.length;t<r;t++){o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},R.apply(this,arguments)},De=globalThis&&globalThis.__rest||function(e,o){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&o.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)o.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t},ce=globalThis&&globalThis.__read||function(e,o){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),i,a=[],s;try{for(;(o===void 0||o-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(n){s={error:n}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},H=0,He={footerPosition:"inner",preview:!0};function Qe(e,o){var t,r=c.exports.useContext(Te),i=r.getPrefixCls,a=r.componentConfig,s=r.rtl,n=je(e,He,a==null?void 0:a.Image),I=n.style,x=n.className,d=n.src,g=n.width,C=n.height,f=n.title,O=n.description,b=n.actions,h=n.footerPosition,E=n.simple,m=n.loader,$=n.loaderClassName,S=n.error,w=n.preview,A=n.previewProps,U=n.alt,Q=n.onClick,B=n.index,W=n._index,X=n.onError,Y=n.onLoad,N=n.lazyload,me=De(n,["style","className","src","width","height","title","description","actions","footerPosition","simple","loader","loaderClassName","error","preview","previewProps","alt","onClick","index","_index","onError","onLoad","lazyload"]),pe=ke(),T=c.exports.useContext($e),j=T.previewGroup,ge=T.handleVisibleChange,be=T.registerPreviewUrl,he=T.registerPreviewProps,we=T.setCurrentIndex,y=c.exports.useMemo(function(){return se(A)?A:{}},[A]),ye=c.exports.useMemo(function(){return se(N)?N:{}},[N]),_=c.exports.useMemo(function(){return D(B)||D(W)?(H=D(B)?B:W,H):H++},[]),K=y.src||d,xe=ce(de({title:f,description:O,actions:b}),1),q=xe[0],k=Ae("beforeLoad"),ee=k.isLoading,J=k.isError,V=k.isLoaded,Ce=k.isBeforeLoad,M=k.setStatus,F=c.exports.useRef(!1),re=ce(Re(!1,{defaultValue:y.defaultVisible,value:y.visible}),2),te=re[0],_e=re[1],Z=c.exports.useMemo(function(){return Me(y,["visible","defaultVisible","src","onVisibleChange"])},[y]),l=i("image"),Pe=!ue(y.visible),Ie=L(l,(t={},t[l+"-rtl"]=s,t[l+"-simple"]=E,t[l+"-before-load"]=Ce,t[l+"-loading"]=ee,t[l+"-loading-error"]=J,t[l+"-with-footer-inner"]=V&&q&&h==="inner",t[l+"-with-footer-outer"]=V&&q&&h==="outer",t[l+"-with-preview"]=V&&w&&!J&&!Pe,t),x),P=c.exports.useRef();function Oe(u){F.current=!0,M("loaded"),Y&&Y(u)}function Ee(u){F.current=!0,M("error"),X&&X(u)}function ie(u){w&&j?(we(_),ge(!0)):w&&ne(!0),Q&&Q(u)}function ne(u){y.onVisibleChange&&y.onVisibleChange(u,te),_e(u)}var oe=Ze(R({target:P.current,defaultInView:!N},ye)).inView;c.exports.useEffect(function(){F.current=!1},[d]),c.exports.useEffect(function(){P.current&&(oe?((P.current.src||d)&&P.current.src!==d&&(P.current.src=d),!F.current&&!P.current.complete&&M("loading")):M("lazyload"))},[d,oe]),c.exports.useEffect(function(){if(!!j){var u=he(_,Z);return function(){return u(_)}}},[_,j,Z]),c.exports.useEffect(function(){if(!!j){var u=be(_,K,w);return function(){return u(_)}}},[_,j,K,w]);var Ne=G("div",{className:l+"-error",children:[p("div",{className:l+"-error-icon",children:p(Ue,{})}),U&&p("div",{className:l+"-error-alt",children:U})]}),ae=p("div",{className:L(l+"-loader",$),children:G("div",{className:l+"-loader-spin",children:[p(Fe,{}),p("div",{className:l+"-loader-spin-text",children:"Loading"})]})}),Ve=function(){if(m===!0)return ae;var u=m||ae;return N||m?u:null};return G("div",{className:Ie,style:Object.assign({width:g,height:C},I),ref:o,children:[p("img",{...R({ref:P,className:l+"-img",tabIndex:0},pe({onPressEnter:ie}),me,N||d===void 0?{}:{src:d},{title:f,width:g,height:C,onLoad:Oe,onError:Ee,onClick:ie,alt:U})}),!V&&G("div",{className:l+"-overlay",children:[J&&(S||Ne),ee&&Ve()]}),V&&q&&p(Ke,{title:f,description:O,actions:b,prefixCls:l,simple:E}),V&&w&&p(ve,{...R({visible:te,src:K},Z,{onVisibleChange:ne})})]})}var We=v.forwardRef(Qe),z=We;z.Preview=ve;z.PreviewGroup=ze;z.displayName="Image";var er=z;export{er as I};
