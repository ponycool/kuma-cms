import{u as S,av as a,r as w,bl as y,bs as P,a as b,j as s,aj as n,bu as x,ad as v,B as C,bt as I,M as j}from"./index.ed698903.js";import{S as F}from"./index.43515e55.js";import{l as q}from"./index.f54b0d3d.js";import{a as L}from"./index.c37bdd26.js";function A({userInfo:m={},loading:l}){const e=S(q),[o]=a.useForm(),[h,c]=w.exports.useState(!1),{lang:u}=w.exports.useContext(y),f=P(),g=async()=>{o.validate().then(async r=>{c(!0);const{password:t,oldPassword:d}=r,p=await L({uuid:m.uuid,password:t,oldPassword:d});p.code===0&&(I(f),o.clearFields(),j.success(p.message))}).catch(r=>{}).finally(()=>{c(!1)})},i=(r=1)=>s(F,{text:{rows:r,width:new Array(r).fill("100%")},animation:!0});return b(a,{style:{width:"500px",marginTop:"6px"},form:o,labelCol:{span:u==="en-US"?8:6},wrapperCol:{span:u==="en-US"?16:18},children:[s(a.Item,{label:e["securitySetting.oldPassword"],field:"oldPassword",rules:[{required:!0,message:e["securitySetting.oldPassword.placeholder"]}],children:l?i:s(n.Password,{placeholder:e["securitySetting.oldPassword.placeholder"]})}),s(a.Item,{label:e["securitySetting.newPassword"],field:"password",rules:[{required:!0,message:e["securitySetting.newPassword.placeholder"]},{validator(r,t){x(r)||t(e["securitySetting.newPassword.error"])}}],children:l?i:s(n.Password,{placeholder:e["securitySetting.newPassword.placeholder"]})}),s(a.Item,{label:e["securitySetting.confirmPassword"],field:"repeat_pwd",rules:[{required:!0,message:e["securitySetting.confirmPassword.placeholder"]},{validator(r,t){const d=o.getFieldValue("password");r!==d&&t(e["securitySetting.confirmPassword.error"])}}],children:l?i:s(n.Password,{placeholder:e["securitySetting.confirmPassword.placeholder"]})}),s(a.Item,{label:" ",children:s(v,{children:s(C,{loading:h,type:"primary",onClick:g,children:e["userSetting.save"]})})})]})}export{A as default};
