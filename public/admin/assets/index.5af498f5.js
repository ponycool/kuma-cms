import{u as U,r as e,bk as F,j as a,a as L,aj as H,az as J}from"./index.d3fd18e3.js";import{P as M}from"./index.93d5e8c1.js";import{C as Q}from"./index.7dfa360a.js";import{T as v}from"./index.25cc8d64.js";import{l as V,s as W,q as X,a as Y}from"./index.8d296fd1.js";import{s as b}from"./index.module.fd951a68.js";import Z from"./card-block.bff72c5a.js";import _ from"./card-add.0ca588a2.js";import tt from"./share-record.c3b2ef46.js";import{i as et}from"./use-immer.module.91135e12.js";import at from"./create.95c65b2f.js";import"./b-tween.es.064e2a03.js";import"./index.f62bb2c0.js";import"./index.4aa479a6.js";import"./index.ccce5d0f.js";import"./index.52059de1.js";import"./index.dc754060.js";import"./index.7349da2c.js";import"./index.90c29e28.js";import"./index.00f7f669.js";import"./index.a58ff037.js";import"./index.8210e717.js";import"./index.93f242bc.js";import"./convertNullToUndefined.a19d8223.js";import"./index.41fbde81.js";const{Row:st,Col:w}=J;function Rt(){const p=U(V),{lang:m}=e.exports.useContext(F),[A,f]=e.exports.useState(!0),[z,j]=e.exports.useState(new Array(1).fill({})),[s,P]=e.exports.useState(),[i,R]=e.exports.useState("ALL"),[x,T]=e.exports.useState(),[n,c]=et({visible:!1,close:function(){c(t=>{t.visible=!1})}}),[h,l]=e.exports.useState(),[d,S]=e.exports.useState(1),[u,E]=e.exports.useState(10),[N,q]=e.exports.useState(0),[D,C]=e.exports.useState(!1);function k(){l(void 0),c(t=>{t.data=void 0,t.visible=!0})}async function G(t){try{const r=await Y({uuid:t});r.code===0&&(l(t),c(o=>{o.data=r.data,o.visible=!0}))}catch{}}async function K(){const t=await W();P(t.data.status)}function g(){!s||(f(!0),X({page:d,pageSize:u,status:i==="ALL"?void 0:i,keyword:x}).then(t=>{const r=t.data.pageData.map(o=>({...o,status:o.status,statusText:s[o.status]}));q(t.data.total),j(r)}).finally(()=>{f(!1)}))}function y(){S(1),g()}e.exports.useEffect(()=>{K()},[]),e.exports.useEffect(()=>{g()},[s,d,u,i,x]);const $=()=>a(tt,{uuid:h,close:()=>C(!1)}),B=()=>a(at,{data:n.data,status:s,close:()=>n.close(),reload:y,uuid:h}),I=()=>L(st,{gutter:24,className:b["card-content"],children:[a(w,{xs:24,sm:12,md:8,lg:6,xl:6,xxl:6,children:a(_,{description:p["cardList.add.quality"],onCreate:k})}),z.map((t,r)=>a(w,{xs:24,sm:12,md:8,lg:6,xl:6,xxl:6,children:a(Z,{card:t,loading:A,onEdit:G,onShareRecord:()=>{l(t.id.toString()),C(!0)},reload:y})},r))]}),O=()=>L(Q,{children:[a(v,{activeTab:i,type:"rounded",onChange:R,extra:a(H.Search,{style:{width:"240px"},placeholder:p[`cardList.tab.${i}.placeholder`],onSearch:T}),children:s&&Object.keys({ALL:m==="zh-CN"?"\u5168\u90E8":"All",...s}).map(t=>a(v.TabPane,{title:m==="zh-CN"?{ALL:"\u5168\u90E8",...s}[t]:t},t))}),a("div",{className:b.container,children:I()}),a("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:a(M,{sizeCanChange:!0,total:N,pageSize:u,current:d,onChange:S,onPageSizeChange:E})})]});return(()=>n.visible?B():D?$():O())()}export{Rt as default};
