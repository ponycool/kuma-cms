import{R as y,r as f,g as O,j as n,_ as C,aQ as T,u as W,ay as P,a as u,F as b,a1 as Z,a2 as I,M as w,q as z,aA as G,az as K,B as g,aR as q}from"./index.d3fd18e3.js";import{S as v}from"./index.f62bb2c0.js";import{D as H}from"./index.4aa479a6.js";import{C as U}from"./index.7dfa360a.js";import{l as J,r as X,d as Y,e as ee}from"./index.8d296fd1.js";import{s as l}from"./index.module.fd951a68.js";import{I as te}from"./index.ccce5d0f.js";import{I as re}from"./index.52059de1.js";function B(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?B(Object(a),!0).forEach(function(r){C(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ae(t,e){var a=f.exports.useContext(O),r=a.prefixCls,s=r===void 0?"arco":r,p=t.spin,o=t.className,c=S(S({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(o?o+" ":"").concat(s,"-icon ").concat(s,"-icon-question")});return p&&(c.className="".concat(c.className," ").concat(s,"-icon-loading")),delete c.spin,delete c.isIcon,n("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...c,children:n("path",{d:"M13 17c0-5.523 4.925-10 11-10s11 4.477 11 10c0 3.607-2.1 6.767-5.25 8.526C26.857 27.142 24 29.686 24 33v3m0 5h.02v.02H24V41Z"})})}var x=y.forwardRef(ae);x.defaultProps={isIcon:!0};x.displayName="IconQuestion";var ne=x;function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?_(Object(a),!0).forEach(function(r){C(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function oe(t,e){var a=f.exports.useContext(O),r=a.prefixCls,s=r===void 0?"arco":r,p=t.spin,o=t.className,c=D(D({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(o?o+" ":"").concat(s,"-icon ").concat(s,"-icon-forward")});return p&&(c.className="".concat(c.className," ").concat(s,"-icon-loading")),delete c.spin,delete c.isIcon,n("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...c,children:n("path",{d:"m9.707 11.707 11.586 11.586a1 1 0 0 1 0 1.414L9.707 36.293c-.63.63-1.707.184-1.707-.707V12.414c0-.89 1.077-1.337 1.707-.707ZM27 35.586V12.414c0-.89 1.077-1.337 1.707-.707l11.586 11.586a1 1 0 0 1 0 1.414L28.707 36.293c-.63.63-1.707.184-1.707-.707Z"})})}var k=y.forwardRef(oe);k.defaultProps={isIcon:!0};k.displayName="IconForward";var ce=k;function E(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?E(Object(a),!0).forEach(function(r){C(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function se(t,e){var a=f.exports.useContext(O),r=a.prefixCls,s=r===void 0?"arco":r,p=t.spin,o=t.className,c=$($({"aria-hidden":!0,focusable:!1,ref:e},t),{},{className:"".concat(o?o+" ":"").concat(s,"-icon ").concat(s,"-icon-play-arrow")});return p&&(c.className="".concat(c.className," ").concat(s,"-icon-loading")),delete c.spin,delete c.isIcon,n("svg",{fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",...c,children:n("path",{d:"M12.533 7.965A1 1 0 0 0 11 8.81v30.377a1 1 0 0 0 1.533.846L36.656 24.84a1 1 0 0 0 0-1.692L12.533 7.965Z"})})}var j=y.forwardRef(se);j.defaultProps={isIcon:!0};j.displayName="IconPlayArrow";var ie=j;const{Ellipsis:le}=G,{Row:de,Col:F}=K;function ge(t){const{card:e,onEdit:a,reload:r}=t,[s,p]=T.useModal(),o=W(J),[c,L]=f.exports.useState(!1),[m,h]=f.exports.useState(t.loading),N=async()=>{h(!0),e.is_active===1?await Y(e.uuid).then(i=>{i.code===0&&(w.success("\u64CD\u4F5C\u6210\u529F"),r())}).finally(()=>h(!1)):await ee(e.uuid).then(i=>{i.code===0&&(w.success("\u64CD\u4F5C\u6210\u529F"),r())}).finally(()=>h(!1))};f.exports.useEffect(()=>{h(t.loading)},[t.loading]);const M=()=>u(b,{children:[n(g,{loading:m,style:{marginLeft:"8px"},type:"primary",onClick:()=>{a(e.uuid)},children:o["cardBlock.options.detail"]}),e.is_active===1?n(g,{loading:m,onClick:()=>{N()},children:o["cardBlock.options.disable"]}):n(g,{type:"outline",loading:m,onClick:()=>{N()},children:o["cardBlock.options.activate"]})]}),R=()=>{let i,d;switch(e.status){case"PLANNING":i="orange",d=n(ie,{});break;case"ACTIVE":i="green",d=n(ce,{});break;case"PAUSED":i="red",d=n(re,{});break;case"COMPLETED":i="blue",d=n(te,{});break;default:i="gray",d=n(ne,{});break}return n(q,{color:i,icon:d,className:l.status,size:"small",children:e.status})},A=()=>m?n(v,{text:{rows:2},animation:!0,className:l["card-block-skeleton"]}):n(H,{column:2,data:[{label:o["cardBlock.label.status"],value:e.is_active?o["cardBlock.label.activated"]:o["cardBlock.label.disabled"]},{label:o["cardBlock.label.viewCount"],value:e.view_count},{label:o["cardBlock.label.activityTime"],value:`${e.start_datetime?e.start_datetime.slice(0,-3):o["cardBlock.label.notSet"]} - ${e.end_datetime?e.end_datetime.slice(0,-3):o["cardBlock.label.notSet"]}`}]}),V=P(l["card-block"]);return u(b,{children:[u(U,{bordered:!0,className:V,size:"small",title:m?u(b,{children:[u("div",{style:{display:"flex",width:"100%"},children:[n(v,{animation:!0,text:{rows:1,width:"100%"},style:{width:"100%",height:"24px"},className:l["card-block-skeleton"]}),n(v,{animation:!0,text:{rows:1,width:"100%"},style:{width:"30%",height:"24px",marginLeft:"16px",marginRight:"16px"},className:l["card-block-skeleton"]})]}),n(v,{animation:!0,text:{rows:1,width:"100%"},style:{width:"100%",height:"20px"},className:l["card-block-skeleton"]})]}):u(b,{children:[u("div",{className:P(l.title,{[l["title-more"]]:c}),children:[u(de,{style:{width:"100%",flexWrap:"nowrap"},children:[n(F,{span:16,children:n(le,{children:n("span",{style:{cursor:"pointer"},onClick:()=>{a(e.uuid)},children:e.name})})}),n(F,{span:6,children:R()})]}),n(Z,{droplist:n(I,{children:[o["cardBlock.menu.delete"],o["cardBlock.menu.shareRecord"]].map((i,d)=>n(I.Item,{onClick:()=>{d===0?s.confirm({title:o["cardBlock.button.delete"],content:o["cardBlock.button.deleteConfirm"],onOk:()=>{X({uuid:e.uuid}).then(Q=>{Q.code===0&&(w.success(o["cardBlock.button.deleteSuccess"]),r())})}}):d===1&&t.onShareRecord()},children:i},d.toString()))}),trigger:"hover",onVisibleChange:L,popupVisible:c,children:n("div",{className:l.more,children:n(z,{})})})]}),n("div",{className:l.time,children:e.created_at})]}),children:[n("div",{className:l.content,children:A()}),n("div",{className:l.extra,children:M()})]}),p]})}export{ge as default};
