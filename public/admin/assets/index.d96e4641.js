import{h as C,aj as p,u as b,av as t,r as h,j as r,bd as x,a as s,aw as v,am as I,i as y,B as m,bc as F}from"./index.a479fa95.js";import{C as L}from"./index.1baf6dfe.js";import{T as w,P as D}from"./index.c9221c57.js";import{C as q,D as k}from"./DelPopconfirm.207e268d.js";import"./index.ba740c57.js";import{U as B}from"./index.adac71e4.js";import{c as S}from"./convertNullToUndefined.a19d8223.js";import{i as T}from"./use-immer.module.97f668e8.js";import{I as P}from"./index.817b2997.js";import{I as N}from"./index.fc2a2722.js";import"./index.5b9e61b6.js";import"./b-tween.es.064e2a03.js";import"./index.5a2540cd.js";import"./index.e7b908db.js";import"./index.a45a4c94.js";import"./index.dc9e8806.js";import"./index.d7329b9a.js";import"./index.366802fa.js";function _(a){return C.post("/api/menu/query",a)}function W(a){return C.post("/api/menu/delete",a)}const g={"en-US":{create:"Create",update:"Update",cancel:"Cancel",save:"Save",name:"Name","name.placeholder":"Please enter a name","name.required":"Please enter a name",code:"Code","code.placeholder":"Please enter a code","code.required":"Please enter a code"},"zh-CN":{create:"\u521B\u5EFA",update:"\u66F4\u65B0",cancel:"\u53D6\u6D88",save:"\u4FDD\u5B58",name:"\u540D\u79F0","name.required":"\u8BF7\u8F93\u5165\u540D\u79F0","name.placeholder":"\u8BF7\u8F93\u5165\u540D\u79F0",code:"\u7F16\u7801","code.required":"\u8BF7\u8F93\u5165\u7F16\u7801","code.placeholder":"\u8BF7\u8F93\u5165\u7F16\u7801"}},f=p.TextArea;function j(a){const e=b(g),[l]=t.useForm();h.exports.useState("");const[n,u]=h.exports.useState(!1);return h.exports.useEffect(()=>{if(a.data){const d=S(a.data);l.setFieldsValue({...d})}},[a.data]),h.exports.useEffect(()=>{a.visible===!1&&l.resetFields()},[l,a.visible]),r(x,{width:400,title:a.data?e.update:e.create,visible:a.visible,onOk:l.submit,onCancel:a.close,confirmLoading:n,okText:a.data?e.save:e.create,children:s(t,{form:l,labelCol:{span:2},wrapperCol:{span:22},children:[r(t.Item,{label:e.name,field:"name",rules:[{required:!0,message:e["name.required"]}],children:r(p,{maxLength:100,showWordLimit:!0,placeholder:e["name.placeholder"]})}),r(t.Item,{label:e.code,field:"code",rules:[{required:!0,message:e["code.required"]}],children:r(p,{maxLength:20,showWordLimit:!0,placeholder:e["code.placeholder"]})}),r(t.Item,{label:e.code,field:"code",rules:[{required:!0,message:e["code.required"]}],wrapperCol:{span:2},children:r(w,{treeData:[],fieldNames:{key:"id",title:"name"},allowClear:!0})}),r(t.Item,{label:e["articleCreate.form.coverImage.label"],field:"cover_image",triggerPropName:"fileList",children:r(B,{action:"/api/upload/image",data:{token:JSON.parse(localStorage.getItem("token")).token},imagePreview:!0,accept:"image/png, image/jpg, image/jpeg",listType:"picture-card",limit:1})}),r(t.Item,{label:e["articleCreate.form.author.label"],field:"author",wrapperCol:{span:2},children:r(p,{maxLength:50,showWordLimit:!0,placeholder:e["articleCreate.form.author.placeholder"]})}),r(t.Item,{label:e["articleCreate.form.seoTitle.label"],field:"seo_title",children:r(p,{maxLength:200,showWordLimit:!0,placeholder:e["articleCreate.form.seoTitle.placeholder"]})}),r(t.Item,{label:e["articleCreate.form.seoDesc.label"],field:"seo_desc",children:r(f,{maxLength:200,placeholder:e["articleCreate.form.seoDesc.placeholder"],showWordLimit:!0,autoSize:!0,style:{minHeight:64}})}),r(t.Item,{label:e["articleCreate.form.seoKeywords.label"],field:"seo_keywords",children:r(f,{maxLength:200,placeholder:e["articleCreate.form.seoKeywords.placeholder"],showWordLimit:!0,autoSize:!0,style:{minHeight:64}})}),r(t.Item,{label:e["articleCreate.form.summary.label"],field:"summary",children:r(f,{maxLength:200,placeholder:e["articleCreate.form.summary.placeholder"],showWordLimit:!0,autoSize:!0,style:{minHeight:64}})}),r(t.Item,{label:e["articleCreate.form.sortIndex.label"],field:"sort_index",wrapperCol:{span:2},initialValue:1,rules:[{validator(d,o){d&&d<1?o(e["articleCreate.form.sortIndex.error"]):o()}}],children:r(v,{maxLength:10,hideControl:!0,placeholder:e["articleCreate.form.sortIndex.placeholder"]})}),r(t.Item,{label:e["articleCreate.form.isPublished.label"],field:"is_published",triggerPropName:"checked",initialValue:!1,children:r(I,{})})]})})}function re(){const a=b(y),e=b(g),l=h.exports.useRef(),[n,u]=T({visible:!1,close:()=>{u(o=>{o.visible=!1,o.data=void 0})}}),d=[{title:e["columns.name"],dataIndex:"name"},{title:e["columns.action"],key:"option",render:(o,i)=>s(q,{children:[s(m,{type:"text",onClick:()=>{u(c=>{c.visible=!0})},children:[r(P,{}),e["columns.action.create"]]}),s(m,{type:"text",onClick:()=>{u(c=>{c.id=void 0,c.level=void 0,c.uuid=i.uuid,c.visible=!0}),setDetail({name:i.name,code:i.code,sortIndex:i.sort_index,pid:i.pid,id:i.id})},children:[r(F,{}),e["columns.action.edit"]]}),r(k,{reqDel:W,params:{uuid:i.uuid},reload:()=>l.current.reload(),children:s(m,{type:"text",children:[r(N,{}),e["columns.action.delete"]]})})]})}];return s(L,{children:[r(j,{data:n.data,visible:n.visible,close:n.close,reload:()=>l.current.reload()}),r(D,{ref:l,request:_,columns:d,pagination:!1,pageSize:!1,actionBarRender:[r(m,{type:"primary",onClick:()=>l.current.reload(),children:a["table.refresh"]},"refresh")],toolBarRender:[r(m,{type:"primary",onClick:()=>{u(o=>{o.visible=!0})},children:a["table.create"]},"create")]})]})}export{re as default};
