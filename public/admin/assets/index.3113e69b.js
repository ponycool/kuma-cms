import{aj as h,av as u,r as f,u as b,j as e,K as S,B as c,a as p,am as D,bb as v,M as k,i as q,bc as I,be as P,F as O}from"./index.1f4442a4.js";import{C as E}from"./index.299756e8.js";import{B as F}from"./index.ebc12095.js";import{P as T}from"./index.22b56d0d.js";import{u as L,c as K,e as A,d as _,r as U,q as j,a as z}from"./index.ff7b0f57.js";import{C as M}from"./index.3c134d6b.js";import{c as N}from"./convertNullToUndefined.a19d8223.js";import{M as W}from"./index.aebf90cd.js";import{i as R}from"./use-immer.module.b9538e95.js";import{D as H}from"./DelPopconfirm.e814543a.js";import{t as V}from"./index.ce7f7976.js";import{I as G}from"./index.a2f913f5.js";import{I as $}from"./index.ace897e6.js";import"./index.4ce8cb13.js";import"./b-tween.es.064e2a03.js";import"./index.4d38a18b.js";import"./index.4f6f0621.js";import"./index.9fd0cefa.js";const x={"en-US":{"columns.keyword":"Keyword","columns.title":"Title","columns.code":"Code","columns.status":"Status","columns.status.enabled":"Enabled","columns.status.disabled":"Disabled","columns.updatedAt":"Updated At","columns.action":"Action","columns.action.edit":"Edit","columns.action.enable":"Enable","columns.action.disable":"Disable","columns.action.delete":"Delete","pageCreate.title.update":"Edit Page","pageCreate.title.create":"Create Page","pageCreate.button.cancel":"Cancel","pageCreate.button.save":"Save","pageCreate.button.create":"Create","pageCreate.form.title.label":"Title","pageCreate.form.title.required":"Please enter the title","pageCreate.form.code.label":"Code","pageCreate.form.code.required":"Please enter the code","pageCreate.form.seoTitle.label":"SEO Title","pageCreate.form.seoTitle.required":"Please enter the SEO title","pageCreate.form.seoDesc.label":"SEO Description","pageCreate.form.seoDesc.required":"Please enter the SEO description","pageCreate.form.seoKeywords.label":"SEO Keywords","pageCreate.form.seoKeywords.required":"Please enter the SEO keywords","pageCreate.form.status.label":"Status","pageCreate.form.content.label":"Content","pageCreate.form.content.required":"Please enter the content","pageCreate.form.title.placeholder":"Please enter the title","pageCreate.form.code.placeholder":"Please enter the code","pageCreate.form.seoTitle.placeholder":"Please enter the SEO title","pageCreate.form.seoDesc.placeholder":"Please enter the SEO description","pageCreate.form.seoKeywords.placeholder":"Please enter the SEO keywords","pageCreate.form.content.placeholder":"Please enter the content"},"zh-CN":{"columns.keyword":"\u5173\u952E\u8BCD","columns.title":"\u6807\u9898","columns.code":"\u7F16\u7801","columns.status":"\u542F\u7528\u72B6\u6001","columns.status.enabled":"\u542F\u7528","columns.status.disabled":"\u7981\u7528","columns.updatedAt":"\u4FEE\u6539\u65F6\u95F4","columns.action":"\u64CD\u4F5C","columns.action.edit":"\u7F16\u8F91","columns.action.enable":"\u542F\u7528","columns.action.disable":"\u7981\u7528","columns.action.delete":"\u5220\u9664","pageCreate.title.update":"\u7F16\u8F91\u9875\u9762","pageCreate.title.create":"\u521B\u5EFA\u9875\u9762","pageCreate.button.cancel":"\u53D6\u6D88","pageCreate.button.save":"\u4FDD\u5B58","pageCreate.button.create":"\u521B\u5EFA","pageCreate.form.title.label":"\u6807\u9898","pageCreate.form.title.required":"\u8BF7\u8F93\u5165\u6807\u9898","pageCreate.form.code.label":"\u7F16\u7801","pageCreate.form.code.required":"\u8BF7\u8F93\u5165\u7F16\u7801","pageCreate.form.seoTitle.label":"SEO\u6807\u9898","pageCreate.form.seoTitle.required":"\u8BF7\u8F93\u5165SEO\u6807\u9898","pageCreate.form.seoDesc.label":"SEO\u63CF\u8FF0","pageCreate.form.seoDesc.required":"\u8BF7\u8F93\u5165SEO\u63CF\u8FF0","pageCreate.form.seoKeywords.label":"SEO\u5173\u952E\u8BCD","pageCreate.form.seoKeywords.required":"\u8BF7\u8F93\u5165SEO\u5173\u952E\u8BCD","pageCreate.form.status.label":"\u542F\u7528","pageCreate.form.content.label":"\u6B63\u6587","pageCreate.form.content.required":"\u8BF7\u8F93\u5165\u6B63\u6587","pageCreate.form.title.placeholder":"\u8BF7\u8F93\u5165\u6807\u9898","pageCreate.form.code.placeholder":"\u8BF7\u8F93\u5165\u7F16\u7801","pageCreate.form.seoTitle.placeholder":"\u8BF7\u8F93\u5165SEO\u6807\u9898","pageCreate.form.seoDesc.placeholder":"\u8BF7\u8F93\u5165SEO\u63CF\u8FF0","pageCreate.form.seoKeywords.placeholder":"\u8BF7\u8F93\u5165SEO\u5173\u952E\u8BCD","pageCreate.form.content.placeholder":"\u8BF7\u8F93\u5165\u6B63\u6587"}},y=h.TextArea;function J(t){const[i]=u.useForm(),[n,g]=f.exports.useState(!1),a=b(x);async function d(){i.validate().then(async r=>{g(!0);try{const s={...r,status:r.status?"true":"false"};let C;t.data?C=await L({...s,uuid:t.data.uuid||t.uuid}):C=await K(s),C.code===0&&(t.reload(),t.close())}finally{g(!1)}}).catch(r=>{if(r.errors)for(const s in r.errors)k.error(r.errors[s].message)})}return f.exports.useEffect(()=>{var r;if((r=t.data)!=null&&r.page){const s=N(t.data.page);i.setFieldsValue({...s})}},[t.data]),f.exports.useEffect(()=>{t.visible===!1&&i.resetFields()},[i,t.visible]),e(E,{title:t.data?a["pageCreate.title.update"]:a["pageCreate.title.create"],extra:e(S,{style:{cursor:"point",color:"#333",fontSize:"16px"},onClick:()=>t.close()}),actions:[e(c,{type:"default",onClick:()=>t.close(),children:a["pageCreate.button.cancel"]},"cancel"),e(c,{type:"primary",loading:n,onClick:d,children:t.data?a["pageCreate.button.save"]:a["pageCreate.button.create"]},"submit")],children:p(u,{form:i,labelCol:{span:2},wrapperCol:{span:22},children:[e(u.Item,{label:a["pageCreate.form.title.label"],field:"title",rules:[{required:!0,message:a["pageCreate.form.title.required"]}],children:e(h,{maxLength:100,showWordLimit:!0,placeholder:a["pageCreate.form.title.placeholder"]})}),e(u.Item,{label:a["pageCreate.form.code.label"],field:"code",wrapperCol:{span:2},children:e(h,{maxLength:50,placeholder:a["pageCreate.form.code.placeholder"]})}),e(u.Item,{label:a["pageCreate.form.seoTitle.label"],field:"seo_title",children:e(h,{maxLength:200,showWordLimit:!0,placeholder:a["pageCreate.form.seoTitle.placeholder"]})}),e(u.Item,{label:a["pageCreate.form.seoDesc.label"],field:"seo_desc",children:e(y,{maxLength:200,placeholder:a["pageCreate.form.seoDesc.placeholder"],showWordLimit:!0,autoSize:!0,style:{minHeight:64}})}),e(u.Item,{label:a["pageCreate.form.seoKeywords.label"],field:"seo_keywords",children:e(y,{maxLength:200,placeholder:a["pageCreate.form.seoKeywords.placeholder"],showWordLimit:!0,autoSize:!0,style:{minHeight:64}})}),e(u.Item,{label:a["pageCreate.form.status.label"],field:"status",triggerPropName:"checked",initialValue:!1,children:e(D,{})}),e(v,{orientation:"left",children:a["pageCreate.form.content.label"]}),e(u.Item,{field:"content",wrapperCol:{span:24},triggerPropName:"html",trigger:"getContent",rules:[{required:!0},{validator(r,s){if(r==="<p><br></p>")return s(a["pageCreate.form.content.required"]);s()}}],children:e(W,{})})]})})}function fe(){const t=b(x),i=b(q),n=f.exports.useRef(),[g,a]=f.exports.useState([]),[d,r]=R({visible:!1,close:function(){r(l=>{l.visible=!1})}}),[s,C]=f.exports.useState();async function w(l){try{const o=await z({uuid:l});o.code===0&&(C(l),r(m=>{m.data=o.data,m.visible=!0}))}catch{}}f.exports.useEffect(()=>{V().then(l=>{const o=[];for(const m in l.data)o.push({value:m,label:l.data[m]});a(o)})},[]);const B=[{title:t["columns.keyword"],dataIndex:"keyword",search:!0,hide:!0},{title:t["columns.title"],dataIndex:"title",ellipsis:!0},{title:t["columns.code"],dataIndex:"code"},{title:t["columns.status"],dataIndex:"status",render(l,o){return o.status===1?e(F,{status:"success",text:t["columns.status.enabled"]}):e(F,{status:"error",text:t["columns.status.disabled"]})}},{title:t["columns.updateAt"],dataIndex:"updated_at"},{title:t["columns.action"],width:280,render:(l,o)=>p(M,{children:[p(c,{type:"text",onClick:()=>w(o.uuid),children:[e(I,{}),t["columns.action.edit"]]}),o.status===0?p(c,{type:"text",onClick:async()=>{(await A(o.uuid)).code===0&&n.current.reload()},children:[e(G,{}),t["columns.action.enable"]]}):p(c,{type:"text",onClick:async()=>{(await _(o.uuid)).code===0&&n.current.reload()},children:[e(P,{}),t["columns.action.disable"]]}),e(H,{reqDel:U,params:{uuid:o.uuid},reload:()=>n.current.reload(),children:p(c,{type:"text",children:[e($,{}),t["columns.action.delete"]]})})]})}];return p(O,{children:[d.visible&&e(J,{visible:d.visible,data:d.data,close:()=>d.close(),reload:()=>n.current.reload(),target:g,uuid:s}),e(E,{style:{display:d.visible?"none":void 0},children:e(T,{ref:n,request:j,columns:B,actionBarRender:[e(c,{type:"primary",onClick:()=>n.current.reload(),children:i["table.refresh"]},"refresh")],toolBarRender:[e(c,{type:"primary",onClick:()=>{C(void 0),r(l=>{l.visible=!0,l.data=void 0})},children:i["table.createPage"]},"create")]})})]})}export{fe as default};
