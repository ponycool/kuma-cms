import{u as S,av as a,r as w,bk as y,bm as P,a as b,j as r,aj as n,bo as x,ad as v,B as C,bn as I,M as j}from"./index.d3fd18e3.js";import{S as F}from"./index.f62bb2c0.js";import{l as k}from"./index.f54b0d3d.js";import{a as q}from"./index.01bfde8a.js";function A({userInfo:m={},loading:l}){const e=S(k),[o]=a.useForm(),[h,c]=w.exports.useState(!1),{lang:u}=w.exports.useContext(y),g=P(),f=async()=>{o.validate().then(async s=>{c(!0);const{password:t,oldPassword:d}=s,p=await q({uuid:m.uuid,password:t,oldPassword:d});p.code===0&&(I(g),o.clearFields(),j.success(p.message))}).catch(s=>{console.log(s)}).finally(()=>{c(!1)})},i=(s=1)=>r(F,{text:{rows:s,width:new Array(s).fill("100%")},animation:!0});return b(a,{style:{width:"500px",marginTop:"6px"},form:o,labelCol:{span:u==="en-US"?8:6},wrapperCol:{span:u==="en-US"?16:18},children:[r(a.Item,{label:e["securitySetting.oldPassword"],field:"oldPassword",rules:[{required:!0,message:e["securitySetting.oldPassword.placeholder"]}],children:l?i:r(n.Password,{placeholder:e["securitySetting.oldPassword.placeholder"]})}),r(a.Item,{label:e["securitySetting.newPassword"],field:"password",rules:[{required:!0,message:e["securitySetting.newPassword.placeholder"]},{validator(s,t){x(s)||t(e["securitySetting.newPassword.error"])}}],children:l?i:r(n.Password,{placeholder:e["securitySetting.newPassword.placeholder"]})}),r(a.Item,{label:e["securitySetting.confirmPassword"],field:"repeat_pwd",rules:[{required:!0,message:e["securitySetting.confirmPassword.placeholder"]},{validator(s,t){const d=o.getFieldValue("password");s!==d&&t(e["securitySetting.confirmPassword.error"])}}],children:l?i:r(n.Password,{placeholder:e["securitySetting.confirmPassword.placeholder"]})}),r(a.Item,{label:" ",children:r(v,{children:r(C,{loading:h,type:"primary",onClick:f,children:e["userSetting.save"]})})})]})}export{A as default};
