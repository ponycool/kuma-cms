import{u as m,i as C,r as c,a as i,j as r,aR as p,B as n,bj as b,bl as g}from"./index.81a318d7.js";import"./index.003183b7.js";import{C as y}from"./index.e8a3021e.js";import{P as I}from"./index.7735d81f.js";import{C as w,D as k}from"./DelPopconfirm.0eb60b9c.js";import{t as D,q as v,e as B,d as j,r as q,a as L}from"./index.008a6db4.js";import{i as R,C as T}from"./create.bca046ba.js";import{i as _}from"./use-immer.module.e09e2ae8.js";import{I as E}from"./image.ba169a78.js";import{I as P}from"./index.0d6a3978.js";import{I as S}from"./index.bb1868e0.js";import"./index.c105be9d.js";import"./index.e9130f16.js";import"./index.b30ca869.js";import"./index.b0638631.js";import"./index.2f504a85.js";import"./index.fdc8d95f.js";import"./index.911612d5.js";import"./b-tween.es.064e2a03.js";import"./index.2bb1cf28.js";import"./index.c4b4bd87.js";import"./index.dab3fe75.js";import"./scrollIntoView.e2dbd9f1.js";import"./convertNullToUndefined.a19d8223.js";const ie=()=>{const d=m(C),a=m(R),s=c.exports.useRef(),[f,h]=c.exports.useState([]),[u,l]=_({show:!1});async function x(t){const e=await L(t);e.code===0&&l(o=>{o.data=e.data,o.show=!0})}return c.exports.useEffect(()=>{D().then(t=>{const e=[];for(const o in t.data)e.push({value:o,label:t.data[o]});h(e)})},[]),i(y,{children:[r(T,{reload:()=>{var t;return(t=s.current)==null?void 0:t.reload()},close:()=>l(t=>{t.show=!1}),visible:u.show,target:f,data:u.data}),r(I,{ref:s,request:v,columns:[{title:a["columns.carousel"],width:150,dataIndex:"image",render:(t,e)=>{if(e.image){let o="";return o=e.image,r(E,{width:200,height:100,src:o})}else return a.noCover}},{title:a["columns.title"],dataIndex:"title"},{title:a["columns.description"],dataIndex:"description"},{title:a["columns.link"],dataIndex:"link"},{title:a["columns.status"],dataIndex:"status",render(t,e){return e.status===1?r(p,{color:"green",children:a["columns.status.enable"]}):r(p,{color:"red",children:a["columns.status.disable"]})}},{title:a["columns.action"],width:280,render:(t,e)=>i(w,{children:[i(n,{type:"text",onClick:()=>x(e.uuid),children:[r(b,{}),a["columns.action.edit"]]}),e.status===0?i(n,{type:"text",onClick:async()=>{(await B(e.uuid)).code===0&&s.current.reload()},children:[r(P,{}),a["columns.action.enable"]]}):i(n,{type:"text",onClick:async()=>{(await j(e.uuid)).code===0&&s.current.reload()},children:[r(g,{}),a["columns.action.disable"]]}),r(k,{reqDel:q,params:e.uuid,reload:()=>s.current.reload(),children:i(n,{type:"text",children:[r(S,{}),a["columns.action.delete"]]})})]})}],pagination:!1,pageSize:!1,actionBarRender:[r(n,{type:"primary",onClick:()=>s.current.reload(),children:d["table.refresh"]},"refresh")],toolBarRender:[r(n,{type:"primary",onClick:()=>{l(t=>{t.data=void 0,t.show=!0})},children:d["table.create"]},"create")]})]})};export{ie as default};
